<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>SunWin Live Result</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    #taixiu-popup {
      position: fixed;
      top: 10px;
      right: 10px;
      padding: 14px;
      background: rgba(0, 0, 0, 0.85);
      color: #00ff90;
      font-family: monospace;
      font-size: 15px;
      border-radius: 10px;
      z-index: 99999;
      min-width: 200px;
      box-shadow: 0 0 10px #000;
      transition: transform .15s ease-in-out, opacity .2s;
    }

    /* Animation nh·∫π */
    .flash {
      transform: scale(1.05);
      opacity: 0.7;
    }
  </style>
</head>

<body style="background:#111; color:white; text-align:center; padding-top:40px;">

  <h2>üî¥ LIVE K·∫æT QU·∫¢ T√ÄI X·ªàU</h2>
  <p>D·ªØ li·ªáu lu√¥n c·∫≠p nh·∫≠t theo Firebase realtime.</p>

  <div id="taixiu-popup">‚è≥ ƒêang t·∫£i d·ªØ li·ªáu...</div>

  <script>
    const dbUrl = "https://bcrapi-default-rtdb.firebaseio.com/taixiu_sessions.json";

    let lastPhien = null;

    async function loadData() {
      try {
        const res = await fetch(dbUrl + "?t=" + Date.now());
        const data = await res.json();
        if (!data || !data.Phien) return;

        const popup = document.getElementById("taixiu-popup");

        // N·∫øu phi√™n m·ªõi ‚Üí t·∫°o animation
        if (lastPhien !== data.Phien) {
          popup.classList.add("flash");
          setTimeout(() => popup.classList.remove("flash"), 250);
          lastPhien = data.Phien;
        }

        // Render giao di·ªán
        popup.innerHTML = `
          <b>Phi√™n #${data.Phien}</b><br>
          üé≤ ${data.xuc_xac_1} - ${data.xuc_xac_2} - ${data.xuc_xac_3}<br>
          ‚ûï T·ªïng: ${data.tong}<br>
          üü¢ K·∫øt qu·∫£: <b>${data.ket_qua}</b>
        `;

      } catch (err) {
        console.error("L·ªói t·∫£i Firebase:", err);
      }
    }

    // T·ª± c·∫≠p nh·∫≠t m·ªói 1 gi√¢y
    setInterval(loadData, 1000);

    // Load l·∫ßn ƒë·∫ßu
    loadData();
  </script>

</body>
</html>
